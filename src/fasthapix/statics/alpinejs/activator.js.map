{"version":3,"sources":["activator.js"],"names":["clickAways","Array","from","document","querySelectorAll","controls","forEach","element","elementAriaControls","getAttribute","myClasses","split","i","length","elementComponentClass","concat","apply","indexOf","classList","add","querySelector","closest","event","stopPropagation","clickAway","remove","setAttribute","body","activeControlActive","this","contains","activeAriaControls","activePanel","activePanelCloses","activeComponentClass","activeComponent","dataControl","dataset","control","dataClickAway","dataScrollLock","scrollLock","addEventListener","deactivateToggle","windowWidth","window","innerWidth","toggle","activateScrollLock","key","panels","activeSiblings","deactivateSiblings"],"mappings":"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","file":"activator.js","sourcesContent":["/*!\n * CODEBASE ACTIVATOR\n * MIT Licence\n * Unchanged since v4.0.5\n */\n\nconst clickAways = Array.from(document.querySelectorAll('[data-click-away=\"true\"]'));\nconst controls = Array.from(document.querySelectorAll('[class*=-control]'));\nconst panels = Array.from(document.querySelectorAll('[class*=-panel]'));\n//const closes = Array.from(document.querySelectorAll('[class*=-close]'));\n\n// Find and decorate the click-away dismissers\nclickAways.forEach(element => {\n  let elementAriaControls = element.getAttribute('aria-controls');\n  let myClasses = element.getAttribute('class').split(' ');\n  for (let i = 0; i < myClasses.length; i++) {\n    myClasses[i] = myClasses[i].split('-');\n  }\n  myClasses = [].concat.apply([], myClasses);\n  let elementComponentClass = '.' + myClasses[myClasses.indexOf('control') - 1] + '-wrapper';\n\n  element.classList.add('click-away');\n  document.querySelector('#' + elementAriaControls).classList.add('click-away');\n  if (document.querySelector('#' + elementAriaControls).closest(elementComponentClass) != null) {\n    document.querySelector('#' + elementAriaControls).closest(elementComponentClass).classList.add('click-away');\n  }\n});\n\n// Do something\ncontrols.forEach(element => {\n  element.addEventListener('click', function (event) {\n\n    event.stopPropagation();\n\n    // You only need to uncomment this if you must have a “double duty” hyperlink, \n    // e.g. the first-click opens a sub-menu, then second-click follows the link.\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // if (event.target.nodeName.toLowerCase() === 'a') {\n    //   if (!event.target.classList.contains('active')) {\n    //     event.preventDefault();\n    //   }\n    // }\n\n    let myClasses = this.getAttribute('class').split(' ');\n    for (let i = 0; i < myClasses.length; i++) {\n      myClasses[i] = myClasses[i].split('-');\n    }\n    myClasses = [].concat.apply([], myClasses);\n\n    let activeControlActive = this.classList.contains('active');  // true or false\n    let activeAriaControls = this.getAttribute('aria-controls');\n    let activePanel = document.querySelector('#' + activeAriaControls);\n    let activePanelCloses = activePanel.querySelectorAll('[class*=-close]');\n    let activeComponentClass = '.' + myClasses[myClasses.indexOf('control') - 1] + '-wrapper';\n    let activeComponent = activePanel.closest(activeComponentClass);\n    let dataControl = this.dataset.control;\n    let dataClickAway = this.dataset.clickAway;\n    let dataScrollLock = this.dataset.scrollLock;\n\n    const clickAway = () => {\n      let clickAwayActive = document.querySelectorAll('.click-away.active');\n      \n      clickAwayActive.forEach(element => {\n        element.classList.remove('active');\n        element.setAttribute(\"aria-expanded\", \"false\"); // if it has aria-expanded\n      });\n      // Disable any scroll lock\n      document.body.classList.remove('body-scroll-lock');\n    }\n    clickAway();\n\n    const documentClickAway = () => {\n      document.body.addEventListener('click', () => {\n        if (dataClickAway) {\n          clickAway();\n        }\n      });\n    }\n    documentClickAway();\n\n    const deactivateToggle = () => {\n      element.classList.remove('active');\n      element.setAttribute('aria-expanded', 'false');\n      activePanel.classList.remove('active');\n      if (activeComponent !== null) {\n        activeComponent.classList.remove('active');\n      }\n      document.body.classList.remove('body-scroll-lock');\n    }\n\n    // Deactivate siblings \n    // e.g. used in tabs, slideshows\n    const deactivateSiblings = () => {\n      let activeSiblings = activeComponent.querySelectorAll('.active')\n      for (let i = 0; i < activeSiblings.length; i++) {\n        activeSiblings[i].classList.remove('active');\n        activeSiblings[i].setAttribute(\"aria-expanded\", \"false\");\n      }\n    }\n\n    // Deactivate click-aways on window width resize -- because e.g. sometimes used on \n    // navicon menus that you don’t want activated above a particular breakpoint width\n    const deactivateResize = () => {\n      let windowWidth = window.innerWidth;\n      window.addEventListener('resize', function () {\n        if ( window.innerWidth !== windowWidth && dataClickAway === 'true') {\n          clickAway();\n        }\n      });\n    }\n    deactivateResize();\n\n    const activateScrollLock = () => {\n      if (dataScrollLock === 'true') {\n        document.body.classList.toggle('body-scroll-lock');\n      }\n    }\n    activateScrollLock();\n\n    // The Activators\n    // ~~~~~~~~~~~~~~\n    // Must be EITHER a toggle OR a tab\n\n    // Toggle has no siblings (but can have optional click-away)\n    if (dataControl === 'toggle') {\n      if (activeControlActive) {\n        deactivateToggle();\n      } else {\n        element.classList.add('active');\n        element.setAttribute('aria-expanded', 'true');\n        activePanel.classList.add('active');\n        if (activeComponent !== null) {\n          activeComponent.classList.add('active');\n        }\n\n        document.onkeydown = event => {\n          event = event || window.event;\n          if ((event.key === \"Escape\" || event.key === \"Esc\")) {\n            deactivateToggle();\n          }\n        };\n\n        // Stop propagation when clicking activator panel (so that `click away` is not triggered)\n        panels.forEach(element => {\n          element.addEventListener('click', event => {\n            event.stopPropagation();\n          });\n        });\n\n        // Deactivate on close (internal dismiss)\n        activePanelCloses.forEach(element => {\n          element.addEventListener('click', () => {\n            deactivateToggle();\n          });            \n        });\n\n      }\n    }\n    \n    // Tab only works if there is more than one tab (and assumes that one will start as `.active`)\n    if (dataControl === 'tab') {\n      if ( ! this.classList.contains('active')) {\n        clickAway();\n        deactivateSiblings();\n        this.classList.add('active');\n        this.setAttribute(\"aria-expanded\", \"true\");\n        activePanel.classList.add('active');\n      }\n    }\n\n  });    \n});"]}